<!doctype html>
<html>
  <head>
        <title>DonkeyLift</title>
        <link href="css/3rdparty.css" rel="stylesheet" type="text/css" />
        <link href="css/donkeylift.css" rel="stylesheet" type="text/css" />
		<style>
			body { padding: 2em;
			}
			#general-error-message {
				font-color: red;
				font-weight: bold;
			}
		</style>
  </head>
  <body>

	<h4>Sign up</h4>

	<form action="$DONKEYLIFT_API/public/signup" method="post">
	  <div class="form-group">
		<label for="email" class="control-label">Email:</label>
		<input name="email" type="text" class="form-control" id="email" aria-describedBy="help-email">
		<span id="help-email" class="help-block"></span>
	  </div>
	  <div class="form-group">
		<label for="password" class="control-label">Password:</label>
		<input name="password" type="password" class="form-control" id="password" aria-describedBy="help-password">
		<span id="help-password" class="help-block"></span>
	  </div>
	  <div class="form-group">
		<label for="account" class="control-label">Account:</label>
		<input name="account" type="text" class="form-control" id="account" aria-describedBy="help-account">
		<span id="help-account" class="help-block"></span>
	  </div>
	  <span id="general-error-message" class="help-block"></span>
	  <button type="submit" class="btn btn-primary">Sign up</button>
	</form>

  	<script src="js/3rdparty.js" type="text/javascript"></script>
	<script type="text/javascript"> 
			$(function() { 

				$('form').submit(function(e) {
					//client side validation..

					$('.help-block').text('');
					$('form div').removeClass('has-error');

					//go
					 $.ajax({
						url: $(this).attr('action'),
						type: $(this).attr('method'),
						data: $(this).serialize()
					})
					.done(function(data, textStatus, jqxhr) {
						alert(data);
					})
					.fail(function(jqxhr, textStatus, errorThrown) {

						var err = jqxhr.responseJSON.error;
						var elem = jqxhr.responseJSON.arg;
						if (elem) {
							$('#help-' + elem).text(err);
							$('#' + elem).closest('div').addClass('has-error');
						} else {
							$('#general-error-message').text("Error: " + err);
						}
					})
					e.preventDefault();
				});

			});

	</script>
  </body>
</html>
